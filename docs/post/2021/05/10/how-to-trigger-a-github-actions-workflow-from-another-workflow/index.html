<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="utf-8" />
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico"/>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146785440-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-146785440-1');
</script> -->

  <link type="application/atom+xml" rel="alternate" href="https://ospfranco.github.io/feed.xml" title="Oscar Franco" /> 
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Github workflows chaining | Oscar Franco</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Github workflows chaining" />
<meta name="author" content="Oscar Franco" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Here is another post that has to do with my current company migrating CI systems, from Bitrise into Github Actions. While on Bitrise we had workflows that would trigger (fork) more workflows. This worked well for us to trigger our android, iOS and Huawei builds with a single click." />
<meta property="og:description" content="Here is another post that has to do with my current company migrating CI systems, from Bitrise into Github Actions. While on Bitrise we had workflows that would trigger (fork) more workflows. This worked well for us to trigger our android, iOS and Huawei builds with a single click." />
<link rel="canonical" href="https://ospfranco.github.io/post/2021/05/10/how-to-trigger-a-github-actions-workflow-from-another-workflow/" />
<meta property="og:url" content="https://ospfranco.github.io/post/2021/05/10/how-to-trigger-a-github-actions-workflow-from-another-workflow/" />
<meta property="og:site_name" content="Oscar Franco" />
<meta property="og:image" content="https://ospfranco.github.io/assets/profile.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-10T15:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://ospfranco.github.io/assets/profile.jpeg" />
<meta property="twitter:title" content="Github workflows chaining" />
<meta name="twitter:site" content="@ospfranco" />
<meta name="twitter:creator" content="@Oscar Franco" />
<script type="application/ld+json">
{"@type":"BlogPosting","description":"Here is another post that has to do with my current company migrating CI systems, from Bitrise into Github Actions. While on Bitrise we had workflows that would trigger (fork) more workflows. This worked well for us to trigger our android, iOS and Huawei builds with a single click.","author":{"@type":"Person","name":"Oscar Franco"},"headline":"Github workflows chaining","datePublished":"2021-05-10T15:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ospfranco.github.io/post/2021/05/10/how-to-trigger-a-github-actions-workflow-from-another-workflow/"},"image":"https://ospfranco.github.io/assets/profile.jpeg","url":"https://ospfranco.github.io/post/2021/05/10/how-to-trigger-a-github-actions-workflow-from-another-workflow/","dateModified":"2021-05-10T15:00:00+02:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="/css/site.css" />
</head>

<html class="max-h-full">
  <body class="max-h-full bg-black">
    <div class="h-full w-full lg:flex justify-center">
      <div class="lg:hidden p-4 border-b">
  <a href="/" >
    <h2 class="text-xl font-bold text-White">Oscar Franco</h2>
  </a>
  <div class="flex mt-2">
    <a href="https://twitter.com/ospfranco">
      <img src="/assets/twitter.png" class="h-6"/>
    </a>
    <a href="https://github.com/ospfranco">
      <img src="/assets/github.png" class="h-6 pl-4"/>
    </a>
    <a href="https://www.youtube.com/channel/UCHxMuqeVlkDgKG5cs99FH2Q">
      <img src="/assets/youtube.png" class="h-6 pl-4"/>
    </a>
  </div>
</div>

<div class="hidden lg:flex overflow-y-auto lg:border-r p-4 w-80 flex-col justify-center items-center">
  <a href="/" >
    <h2 class="text-2xl font-bold text-coolGray-100 hover:text-white">Oscar Franco</h2>
  </a>

  <div class="flex mt-2">
    <a href="https://twitter.com/ospfranco">
      <img src="/assets/twitter.png" class="h-6"/>
    </a>
    <a href="https://github.com/ospfranco">
      <img src="/assets/github.png" class="h-6 pl-4"/>
    </a>
    <a href="https://www.youtube.com/channel/UCHxMuqeVlkDgKG5cs99FH2Q">
      <img src="/assets/youtube.png" class="h-6 pl-4"/>
    </a>
  </div>
    
  
  
  <a href="https://numbra.io" class="mt-12">
    <div class="mt-2 text-coolGray-300 hover:text-white p-2 text-center">
      Numbra (new)
    </div>
  </a>

  <a href="https://www.newline.co/courses/building-react-native-apps-for-mac">
    <div class="mt-2 text-coolGray-300 hover:text-white p-2 text-center">
      rn-macos course (new)
    </div>
  </a>

  <a href="https://ospfranco.github.io/cidemon">
    <div class="mt-2 text-coolGray-300 hover:text-white p-2 text-center">
      CI Demon
    </div>
  </a>
  
  <a href="https://github.com/ospfranco/react-native-quick-sqlite">
    <div class="mt-2 text-coolGray-300 hover:text-white p-2 text-center">
      react-native-quick-sqlite
    </div>
  </a>

  <a href="https://github.com/ospfranco/link-preview-js">
    <div class="mt-2 text-coolGray-300 hover:text-white p-2 text-center">
      link-preview-js
    </div>
  </a>

  <!-- <div class="mt-6 font-normal text-justify">Latest</div>
  
    
    
    <a href="/post/2021/07/24/reviewing-githubs-copilot/" >
        <div class="mt-2 text-sm text-justify">
          · Reviewing Github's Copilot
        </div>
      </a>
    
  
    
    
    <a href="/post/2021/05/25/100-bucks-per-month-as-indie-hacker/" >
        <div class="mt-2 text-sm text-justify">
          · 100€ MRR as an Indie Hacker
        </div>
      </a>
    
  
    
    
    <a href="/post/2021/05/24/how-to-get-the-wifi-password-on-macos/" >
        <div class="mt-2 text-sm text-justify">
          · Retrieve macOS WiFi password
        </div>
      </a>
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
   -->
</div>

      <div class="overflow-y-auto py-4 px-8 scrollbar-hide bg-white flex-1">
        <div class="flex-1 flex flex-col items-center lg:mx-36">
  <div class="md:w-600 text-center my-10 flex flex-col items-center">
    <h1 class="font-semibold text-6xl">Github workflows chaining</h1>
    <img src="/assets/profile.jpg" class="rounded-full h-24 w-24 object-cover my-4" />
    <div class="text-gray-600 mt-2">
      May 2021
    </div>
  </div>
  
  <div
    class="markdown md:w-600"
  >
    <p>Here is another post that has to do with my current company migrating CI systems, from Bitrise into Github Actions. While on Bitrise we had workflows that would trigger (fork) more workflows. This worked well for us to trigger our android, iOS and Huawei builds with a single click.</p>

<p>Unfortunately, after migrating to Github Actions, it’s not quite clear how to achieve the same. There are some posts on the forums that point to old answers using personal tokens. I lost some time googling around, so I thought I might save the next guy time.</p>

<p>In the past Github prevented triggering workflows from other workflows to prevent recursive triggers. However at some point they added another trigger, so instead of dispatching a build from a parent, you declare a dependency on the child workflow.</p>

<p>Here is an example of a parent workflow:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Fork production builds</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="s">workflow_dispatch</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">say_hi</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Hi</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">echo "Hi"</span>
</code></pre></div></div>
<blockquote>
  <p>You need to have jobs with a step, otherwise github complains, but this entire workflow runs in less than a second.</p>
</blockquote>

<p>and on the child workflow, you just add it to the triggers</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Android HMS Production</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># Automatic trigger when pushing tags</span>
  <span class="c1"># push:</span>
  <span class="c1">#   branches:</span>
  <span class="c1">#     - "!*"</span>
  <span class="c1">#   tags:</span>
  <span class="c1">#     - 'v*'</span>

  <span class="c1"># Manual trigger from the UI</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">message</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Build</span><span class="nv"> </span><span class="s">description'</span>

  <span class="c1"># Dependency to a forking workflow</span>
  <span class="na">workflow_run</span><span class="pi">:</span>
    <span class="na">workflows</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">Fork</span><span class="nv"> </span><span class="s">production</span><span class="nv"> </span><span class="s">builds"</span><span class="pi">]</span>
    <span class="na">type</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">complete</span>
</code></pre></div></div>
<blockquote>
  <p>The ‘complete’ type is just so that this workflow triggers after the previous one has been completed.</p>
</blockquote>

<p>That’s it, now when you trigger the “Fork production builds” (from the github UI), the child (or children) process will run.</p>

<p>If you want even more details about your CI builds and workflows on github, you should check <a href="https://ospfranco.github.io/cidemon">CI Demon</a>, it’s an app that I made that puts your builds right on your mac Desktop.</p>

  </div>


  <a href="https://ospfranco.com">
    <h2 class="text-2xl font-bold text-coolGray-700 my-12">🔙</h2>
  </a>

</div>
      </div>
    </div>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
