<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="utf-8" />
  <link
    rel="shortcut icon"
    type="image/x-icon"
    href="/assets/favicon.ico"
  />
  <link type="application/atom+xml" rel="alternate" href="https://ospfranco.com/feed.xml" title="Oscar Franco" /> <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Migrate RN AppDelegate to Swift | Oscar Franco</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Migrate RN AppDelegate to Swift" />
<meta name="author" content="Oscar Franco" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It’s no secret that JS developers run away from Objective-C, why not migrate the entry point of your app to Swift?" />
<meta property="og:description" content="It’s no secret that JS developers run away from Objective-C, why not migrate the entry point of your app to Swift?" />
<link rel="canonical" href="https://ospfranco.com/post/2021/07/31/migrate-rn-appdelegate-to-swift/" />
<meta property="og:url" content="https://ospfranco.com/post/2021/07/31/migrate-rn-appdelegate-to-swift/" />
<meta property="og:site_name" content="Oscar Franco" />
<meta property="og:image" content="https://ospfranco.com/assets/profile.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-31T15:00:00+02:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://ospfranco.com/assets/profile.jpeg" />
<meta property="twitter:title" content="Migrate RN AppDelegate to Swift" />
<meta name="twitter:site" content="@ospfranco" />
<meta name="twitter:creator" content="@Oscar Franco" />
<script type="application/ld+json">
{"@type":"BlogPosting","description":"It’s no secret that JS developers run away from Objective-C, why not migrate the entry point of your app to Swift?","author":{"@type":"Person","name":"Oscar Franco"},"headline":"Migrate RN AppDelegate to Swift","datePublished":"2021-07-31T15:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ospfranco.com/post/2021/07/31/migrate-rn-appdelegate-to-swift/"},"image":"https://ospfranco.com/assets/profile.jpeg","url":"https://ospfranco.com/post/2021/07/31/migrate-rn-appdelegate-to-swift/","dateModified":"2021-07-31T15:00:00+02:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="/css/site.css" />
</head>

<html class="max-h-full bg-white dark:bg-black">
  <nav
    class="
      flex
      w-full
      py-3
      px-8
      sticky
      top-0
      bg-white
      dark:bg-black
      items-center
    "
  >
    <a href="/">
      <div
        class="
          font-bold
          text-2xl text-coolGray-700
          dark:text-white
          border-b-4 border-red-500
          hover:text-red-500
          transition
          duration-200
        "
      >
        Ospfranco
      </div>
    </a>
    <div class="flex-1"></div>
    <div class="flex">
      <a href="https://twitter.com/ospfranco">
        <img src="/assets/twitter.png" class="h-6" />
      </a>
      <a href="https://github.com/ospfranco">
        <img src="/assets/github.png" class="h-6 pl-4" />
      </a>
      <a href="https://www.youtube.com/channel/UCHxMuqeVlkDgKG5cs99FH2Q">
        <img src="/assets/youtube.png" class="h-6 pl-4" />
      </a>
    </div>
  </nav>
  <body class="max-h-full flex flex-col items-center">
    <div class="flex-1 flex flex-col items-center w-full lg:mx-36">
  <div class="w-full md:w-600 text-center my-10 flex flex-col items-center">
    <h1 class="font-semibold text-6xl dark:text-white">Migrate RN AppDelegate to Swift</h1>
    <img
      src="/assets/profile.jpeg"
      class="rounded-full h-24 w-24 object-cover my-8"
    />
    <div class="text-gray-600 mt-2 dark:text-coolGray-300">
      July 2021
    </div>
  </div>

  <div class="markdown w-full px-8 md:px-0 md:w-600 pb-44"><p>It’s no secret that JS developers run away from Objective-C, why not migrate the entry point of your app to Swift?</p>

<p>Just bare in mind, this won’t make your app completely run on Swift, just the entry point, but at least it should be easier to understand at least the basic methods and entry points of other libraries/functionalities.</p>

<p>This tutorial was created with RN 0.64</p>

<h1 id="1-delete-appdelegateh-appdelegatem-and-mainm">1. Delete AppDelegate.h, AppDelegate.m and main.m</h1>

<p>Just delete this files, we won’t need them. There is one caveat here though, as time passes the code inside of the original AppDelegate might change to what is on this post, so pay attention on your own to see if any changes are necessary.</p>

<h1 id="2-create-an-appdelegateswift">2. Create an AppDelegate.swift</h1>

<p>Right-click the base folder -&gt; New file… -&gt; Swift file -&gt; AppDelegate.swift, after you create it XCode should ask you if you want to create a Bridging header file, click on yes.</p>

<p>The content of the new <code class="language-plaintext highlighter-rouge">AppDelegate.swift</code> file:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">Foundation</span>
<span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">@UIApplicationMain</span>
<span class="kd">class</span> <span class="kt">AppDelegate</span><span class="p">:</span> <span class="kt">UIResponder</span><span class="p">,</span> <span class="kt">UIApplicationDelegate</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">window</span><span class="p">:</span> <span class="kt">UIWindow</span><span class="p">?</span>
  <span class="k">var</span> <span class="nv">bridge</span><span class="p">:</span> <span class="kt">RCTBridge</span><span class="o">!</span>

  <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplication</span><span class="o">.</span><span class="kt">LaunchOptionsKey</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">jsCodeLocation</span><span class="p">:</span> <span class="kt">URL</span>

    <span class="n">jsCodeLocation</span> <span class="o">=</span> <span class="kt">RCTBundleURLProvider</span><span class="o">.</span><span class="nf">sharedSettings</span><span class="p">()</span><span class="o">.</span><span class="nf">jsBundleURL</span><span class="p">(</span><span class="nv">forBundleRoot</span><span class="p">:</span> <span class="s">"index"</span><span class="p">,</span> <span class="nv">fallbackResource</span><span class="p">:</span><span class="kc">nil</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">rootView</span> <span class="o">=</span> <span class="kt">RCTRootView</span><span class="p">(</span><span class="nv">bundleURL</span><span class="p">:</span> <span class="n">jsCodeLocation</span><span class="p">,</span> <span class="nv">moduleName</span><span class="p">:</span> <span class="s">"YOUR_PROJECT_NAME"</span><span class="p">,</span> <span class="nv">initialProperties</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="n">launchOptions</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">rootViewController</span> <span class="o">=</span> <span class="kt">UIViewController</span><span class="p">()</span>
    <span class="n">rootViewController</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">rootView</span>

    <span class="k">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="kt">UIWindow</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">UIScreen</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
    <span class="k">self</span><span class="o">.</span><span class="n">window</span><span class="p">?</span><span class="o">.</span><span class="n">rootViewController</span> <span class="o">=</span> <span class="n">rootViewController</span>
    <span class="k">self</span><span class="o">.</span><span class="n">window</span><span class="p">?</span><span class="o">.</span><span class="nf">makeKeyAndVisible</span><span class="p">()</span>

    <span class="k">return</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="3-fill-the-bridging-header">3. Fill the bridging header</h1>

<p>On your bridging header put the following content:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#import &lt;React/RCTBridgeModule.h&gt;</span>
<span class="cp">#import &lt;React/RCTBridge.h&gt;</span>
<span class="cp">#import &lt;React/RCTEventDispatcher.h&gt;</span>
<span class="cp">#import &lt;React/RCTRootView.h&gt;</span>
<span class="cp">#import &lt;React/RCTUtils.h&gt;</span>
<span class="cp">#import &lt;React/RCTConvert.h&gt;</span>
<span class="cp">#import &lt;React/RCTBundleURLProvider.h&gt;</span>
</code></pre></div></div>

<h1 id="4-fix-swift-compilation">4. Fix swift compilation</h1>

<p>If you try to build the application you will get some errors regarding missing swift dependencies, I can’t really explain why this is happening, but in order to solve it go to your project build setting’s and change the library search paths as follows:</p>

<p><strong>On the project wide settings</strong></p>

<p><img src="https://ospfranco.com/assets/swift_project_settings.jpg" alt="Project settings" title="Project settings" /></p>

<p>Delete the old entries and replace them with a single entry looking for the swift-5.2 libraries</p>

<p><strong>On the target settings</strong></p>

<p><img src="https://ospfranco.com/assets/swift_target_settings.jpg" alt="Target settings" title="Target settings" /></p>

<p>Add a new entry just like the one you left at the project level settings</p>

<h1 id="5-profit">5. Profit</h1>

<p>You should now be able to compile your React Native application!</p>

<p>As stated this doesn’t mean that your app is now running on Swift, but might make it easier for you to add functionality on the native side of things. I started this work because I’m looking into turbo modules and objective-c is just too damn hard to understand to the untrained eye, so I’m expecting it will help me solve the mysteries of enabling Turbo Modules.</p>

<p>I haven’t used technique in production, so integrating other libraries in an open question for me. The lifecycle methods should be easy enough for you to figure out, but importing and calling obj-c libraries might require a bit of work.</p>

<p><strong>This technique was inspired by the work I did on my React Native for macOS online course, <a href="https://www.newline.co/courses/building-react-native-apps-for-mac">check it out</a>!</strong></p>
</div>
</div>

  </body>
  <link
    rel="stylesheet"
    href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/darcula.min.css"
  />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>

  <script>
    hljs.initHighlightingOnLoad();
  </script>
</html>
