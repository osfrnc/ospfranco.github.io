<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="utf-8" />
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico"/>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146785440-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-146785440-1');
</script> -->

  <link type="application/atom+xml" rel="alternate" href="https://ospfranco.github.io/feed.xml" title="Oscar Franco on Github" /> 
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Better debugging experience with VSCode and React Native | Oscar Franco on Github</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Better debugging experience with VSCode and React Native" />
<meta name="author" content="Oscar Franco" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Supercharge your web and react-native development workflow by using a few plugins" />
<meta property="og:description" content="Supercharge your web and react-native development workflow by using a few plugins" />
<link rel="canonical" href="https://ospfranco.github.io/post/2019/08/30/integrating-vscode-in-your-react-native-and-web-workflow/" />
<meta property="og:url" content="https://ospfranco.github.io/post/2019/08/30/integrating-vscode-in-your-react-native-and-web-workflow/" />
<meta property="og:site_name" content="Oscar Franco on Github" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-30T15:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Better debugging experience with VSCode and React Native" />
<meta name="twitter:site" content="@ospfranco" />
<meta name="twitter:creator" content="@Oscar Franco" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://ospfranco.github.io/post/2019/08/30/integrating-vscode-in-your-react-native-and-web-workflow/"},"url":"https://ospfranco.github.io/post/2019/08/30/integrating-vscode-in-your-react-native-and-web-workflow/","author":{"@type":"Person","name":"Oscar Franco"},"description":"Supercharge your web and react-native development workflow by using a few plugins","headline":"Better debugging experience with VSCode and React Native","dateModified":"2019-08-30T15:00:00+02:00","datePublished":"2019-08-30T15:00:00+02:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="/css/site.css" />
</head>
<html class="max-h-full">
  <body class="max-h-full">
    <div class="h-full w-full lg:flex justify-center ">
      <div class="lg:hidden p-4 border-b">
  <a href="/" >
    <!-- <h2 class="text-xl font-bold">Ospfranco</h2> -->
    <img src="/assets/osp.svg" class="h-6"/>
    <h2 class="text-gray-500 text-sm mt-2">Indie Hacker / Web Dev</h2>
  </a>
  <div class="flex mt-2">
    <a href="https://twitter.com/ospfranco">
      <img src="/assets/twitter.png" class="h-6"/>
    </a>
    <a href="https://github.com/ospfranco">
      <img src="/assets/github.png" class="h-6 pl-4"/>
    </a>
  </div>
    
</div>

<div class="hidden lg:block overflow-y-auto lg:border-r p-4 w-80">
  <a href="/" >
    <img src="/assets/osp.svg" class="h-6"/>
    <h2 class="text-gray-500 text-sm mt-2">Indie Hacker / Web Dev</h2>
  </a>

  <div class="flex mt-2">
    <a href="https://twitter.com/ospfranco">
      <img src="/assets/twitter.png" class="h-6"/>
    </a>
    <a href="https://github.com/ospfranco">
      <img src="/assets/github.png" class="h-6 pl-4"/>
    </a>
  </div>
    
  <div class="mt-6 font-normal">Projects</div>
  
  <a href="https://ospfranco.github.io/cidemon">
    <div class="text-sm mt-2 text-gray-600">
      · CI Demon
    </div>
    </a>

  <a href="https://scripthunt.sh">
    <div class="text-sm mt-2 text-gray-600">
      · Scripthunt
    </div>
    </a>
  
  <a href="https://github.com/ospfranco/react-native-quick-sqlite">
    <div class="flex text-sm mt-2 text-gray-600 items-center">
      · RN quick sqlite
    </div>
  </a>

  <a href="https://github.com/ospfranco/link-preview-js">
    <div class="flex text-sm mt-2 text-gray-600 items-center">
      · Link preview JS
    </div>
  </a>

  <a href="https://github.com/ospfranco/react-native-macos-menubar-template">
    <div class="flex text-sm mt-2 text-gray-600 items-center">
      · RN macOS menubar template
    </div>
  </a>

  <div class="mt-6 font-normal text-justify">Latest</div>
  
    
    
    <a href="/post/2021/05/25/100-bucks-per-month-as-indie-hacker/" >
        <div class="mt-2 text-sm text-justify">
          · 100€/month as an Indie Hacker
        </div>
      </a>
    
  
    
    
    <a href="/post/2021/05/24/how-to-get-the-wifi-password-on-macos/" >
        <div class="mt-2 text-sm text-justify">
          · How to get the WiFi password on macOS (for devs)
        </div>
      </a>
    
  
    
    
    <a href="/post/2021/05/20/problems-reading-data-from-binary-store,-all-of-the-sudden-my-react-native-app-does-not-compile/" >
        <div class="mt-2 text-sm text-justify">
          · Problems reading data from Binary store, all of the sudden my react-native app does not compile
        </div>
      </a>
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
</div>

      <div class="overflow-y-scroll p-4">
        <div class="flex-1 flex flex-col items-center lg:mx-36">
  <img src="/assets/profile.jpeg" class="rounded-full h-24 w-24 object-cover" />

  <div class="md:w-600 text-center my-10">
    <h1 class="font-semibold text-xl leading-7">Better debugging experience with VSCode and React Native</h1>
    <div class="text-gray-600">
      August 2019
    </div>
  </div>
  
  <div
    class="markdown md:w-600"
  >
    <h1 id="integrating-vscode-and-react-native-for-faster-development">Integrating vscode and react-native for faster development</h1>

<p>There are some steps I took for integrating react-native development with visual studio code, the main benefit is having a faster development cycle, integrated debugging and above all fast feedback cycles.</p>

<h2 id="debugging-your-react-native-app-inside-vscode">Debugging your react-native app inside vscode</h2>

<p>This one is pretty straight foward, download the react-native-tools plugin for vscode, install them, the trick however lies in the proper configuration of your application.</p>

<p>In my case I have configured different schemas/flavors of our app, as well as some environment dependant configuration for deploying them, this means the default configuration doesn’t work.</p>

<p>Once you have the extension installed (and created the launch configurations), you can add the following commands to launch a different simulator and configurations:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[iOS] Debug"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceFolder}"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reactnative"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"launch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ios"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Debug"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"runArguments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"--simulator"</span><span class="p">,</span><span class="w"> </span><span class="s2">"iPhone 6s"</span><span class="p">,</span><span class="w"> </span><span class="s2">"--scheme"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Debug"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"preLaunchTask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm: prebuild"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>
    <p><strong>Scheme:</strong> Allows you to define a particular scheme, if you are using flavored apps, this will allow you to select the corresponding will flavor (by default this matches the project name)</p>
  </li>
  <li>
    <p><strong>Simulator:</strong> I always specify the iPhone 6 or 6s simulator, emulating the latest models actually can be slow and memory consuming, not to mention animations might play slower than on the actual device, in any case, makes sure my machine fans don’t spin like crazy.</p>
  </li>
  <li>
    <p><strong>preLaunchTask:</strong> As stated, there is some environment dependant configuration that is needed for our app to run, this task is part of our package.json, it simply sets some variables and cleans the cache for the packager</p>
  </li>
</ul>

<p>After everything is said an done, you should be able to set breakpoints in your code and directly debug your react-native app.</p>

<hr />

<h2 id="debugging-your-jest-tests-in-vscode">Debugging your jest tests in vscode</h2>

<p>The next one is making the test workflow a lot faster, since most of the time your tests will be running in a headless environment, getting the value of the variables and/or the render tree can be frustrating and difficult, being able to attach a debugger to your tests makes life a lot easier, this one has to do with launch configurations as well, you can create the following configuration in your launch.json:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"node"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"launch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test [INVARIANT]"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceRoot}/node_modules/.bin/jest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"-i"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"internalConsoleOptions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"openOnSessionStart"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"outFiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"${workspaceRoot}/dist/**/*"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"envFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${workspaceRoot}/.env"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>There is nothing special about this configuration, but you can easily run your tests directly from vscode without having to switch back and forward from your console, and as mentioned being able to have debugger breakpoints.</p>

<hr />

<h2 id="reviewing-and-opening-prs-directly-within-vscode">Reviewing and opening PRs directly within vscode</h2>

<p>The next one is also based on an extension, the <a href="https://code.visualstudio.com/blogs/2018/09/10/introducing-github-pullrequests">github pull requests extension</a>, it is not perfect as it is still in somewhat of a beta phase, be the good thing is that you have all the editor tools at your disposal when reviewing code.</p>

<p><img src="https://ospfranco.github.io/assets/gh-pr.png" alt="GithubPullRequests" title="GithubPullRequests" /></p>

<p>There are a few bugs here and there, but the review experience is definitely better than using githubs web editor, can only recommend it.</p>

<hr />

<h2 id="setting-up-husky-and-a-pre-commit-hook-that-makes-your-life-faster">Setting up husky and a pre-commit hook that makes your life faster</h2>

<p>The next one has saved me a lot of time going back and forward with the CI, commit hooks are nothing new, but setting them up can be unglamorous, husky is the tool for the job (I recently heard about lefthook, I’ll give that one a try later),after you add husky to your dependencies, you only need to specify a husky property in your package.json, afterwards everytime you do a yarn install new hooks are generated for you, I have the following configuration:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="nl">"husky"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pre-commit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pretty-quick --staged &amp;&amp; yarn flow &amp;&amp; yarn tsc &amp;&amp; yarn test:invariant"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>It basically saves me having to wait minutes for CI to boot up and inform me of my trivial mistakes, my machine is definitely a lot faster the environment provided by circleCI, I can run the tests in <strong>10 seconds</strong> while the CI environment takes at least 2 minutes to run the same sequence of commands.</p>

<hr />

<h2 id="volta">Volta</h2>

<p>I’ve always been using nvm, but recently discovered <a href="https://volta.sh">volta</a> (formerly notion), the basic idea is the same, managing different versions of node/yarn/etc, I had some minor configuration problems with global packages not being recognized on bash scripts, but seems like a suitable replacement for nvm, would recommend you to try it for and your team</p>

<p>I’m always looking forward to learn new things, if you have any tips to make this workflow faster don’t doubt to send me an email at ospfranco@protonmail.com</p>

<hr />

<h2 id="extra-making-typescript-absolute-paths-work-with-babel">Extra: making typescript absolute paths work with babel</h2>

<p>There is one more configuration that has been quite a time saver in my daily workflow, and that is enabling absolute paths to work with react-native and jest.</p>

<p>On your babel.config.js (might not work with the older babel.rc config), on the module resolver, I changed it to the following configuration:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"module-resolver"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"root"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"./src"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"*"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"./src/"</span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"extensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">".js"</span><span class="p">,</span><span class="w"> </span><span class="s2">".ts"</span><span class="p">,</span><span class="w"> </span><span class="s2">".tsx"</span><span class="p">,</span><span class="w"> </span><span class="s2">".ios.js"</span><span class="p">,</span><span class="w"> </span><span class="s2">".android.js"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>(adding an alias for the root config)</p>

<p>On your tsconfig, you also need to specify some properties:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"baseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src/"</span><span class="err">,</span><span class="w">
</span><span class="nl">"rootDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src"</span><span class="w">
</span></code></pre></div></div>

<p>Afterwards you should be able to get all your modules absolute importable and even works with jest.</p>

  </div>
</div>
      </div>
    </div>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
